<!-- This could just be a temporary file for now.
    The contents could later be integrated into the 
    actual forum form file. -->

<!-- commentcontent block does not exist in any other files yet
could eventually just paste the HTML code itself into the forum form -->
{% block commentcontent %}

    <h4>Comments</h4>

    <!-- Let the user choose how they would like to sort the comments 
        (i.e. ascending or descending by date).-->
    <select name="comments_order" id="comments_order">
        <option value="newest_first" selected>Newest First</option>
        <option value="oldest_first">Oldest First</option>
    </select>

    <!-- Before looping through the comments to display them,
        sort them by the user's chosen order -->
    <script>
        var usingNewestFirst = true;

        // by default, sort by newest first
        comments.sort((a,b)=>a.getTime()-b.getTime());

        var sel = document.getElementById('comments_order');
        sel.onchange = function(){
            
            if (!usingNewestFirst) {
                // sort by newest first
                comments.sort((a,b)=>a.getTime()-b.getTime());
            } else {
                // sort by oldest first
                comments.sort((a,b)=>b.getTime()-a.getTime());
                usingNewestFirst = false;
            }

        };
    </script>


    <!-- Loop through the stored comments -->
    {% for comment in comments %} <!-- post.comments? -->
        
        <li>
            <div class="comment">

                <!-- Display the comment content, comment author, date of submission -->
                <!-- (see Forum_Comment in models.py)-->

                <!-- Jasmine: TODO: change tags to improve styling -->
                <p>{{ comment.author }} - {{ comment.date }}</p> 
                <p>{{ comment.content }}</p>

            </div>
        </li>


    {% endfor %}

{% endblock %}